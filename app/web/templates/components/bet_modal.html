<!-- Betting Popup Dialog -->
<dialog id="bet-modal" class="modal">
    <div class="modal-box max-w-md">
        <!-- Header -->
        <div class="flex justify-between items-start mb-3">
            <div class="flex-1">
                <div class="flex items-center gap-2 text-base font-semibold">
                    <span id="modal-home-display"></span>
                    <button onclick="copyToClipboard('modal-home')"
                        class="btn btn-xs btn-ghost p-0 h-auto min-h-0 opacity-40 hover:opacity-100"
                        title="Copy Home Team">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2">
                            </path>
                        </svg>
                    </button>
                    <span class="opacity-50">vs</span>
                    <span id="modal-away-display"></span>
                    <button onclick="copyToClipboard('modal-away')"
                        class="btn btn-xs btn-ghost p-0 h-auto min-h-0 opacity-40 hover:opacity-100"
                        title="Copy Away Team">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2">
                            </path>
                        </svg>
                    </button>
                </div>
                <div class="flex items-center gap-2 text-xs opacity-60 mt-1">
                    <span id="modal-league-short"></span>
                    <span class="opacity-50">•</span>
                    <span id="modal-start-time" class="flex items-center gap-1">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span id="modal-time-text"></span>
                    </span>
                </div>
            </div>
            <button onclick="document.getElementById('bet-modal').close()"
                class="btn btn-sm btn-ghost btn-circle">✕</button>
        </div>

        <!-- Market/Selection Display -->
        <div class="text-center mb-6">
            <h3 class="text-lg font-bold text-info" id="modal-market-selection"></h3>
        </div>

        <!-- Three Column Stats -->
        <div class="grid grid-cols-3 gap-2 mb-6">
            <div class="text-center">
                <div class="text-xs opacity-60 uppercase mb-1">Odds</div>
                <input type="number" step="0.01" id="modal-odds"
                    class="input input-bordered input-sm w-full text-center font-bold" oninput="recalculateEdge()" />
            </div>
            <div class="text-center">
                <div class="text-xs opacity-60 uppercase mb-1">Prob</div>
                <div class="font-bold text-lg" id="modal-prob-display"></div>
            </div>
            <div class="text-center">
                <div class="text-xs opacity-60 uppercase mb-1">Edge</div>
                <div class="font-bold text-lg text-success" id="modal-edge"></div>
            </div>
        </div>

        <!-- Bookmaker Info -->
        <div class="text-center text-sm opacity-70 mb-4 flex items-center justify-center gap-2">
            Place this trade with <span id="modal-bookmaker-name" class="font-semibold"></span>
            <a id="modal-bookmaker-link" href="#" target="_blank"
                class="hidden btn btn-ghost btn-xs btn-circle p-0 h-6 w-6" title="Open Bookmaker">
                <svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                </svg>
            </a>
        </div>

        <!-- Stake Input -->
        <div class="mb-6">
            <div class="relative flex items-center">
                <input type="number" step="0.01" id="modal-stake"
                    class="input input-bordered input-lg w-full text-center text-2xl pr-16" value="10" />
                <span class="absolute right-4 text-base opacity-50 bg-base-100 px-2">EUR</span>
            </div>
        </div>

        <!-- Register Button -->
        <button class="btn btn-primary btn-block btn-lg" onclick="submitBet()">
            REGISTER TRADE
        </button>

        <!-- Hidden fields -->
        <input type="hidden" id="modal-event-id" />
        <input type="hidden" id="modal-home" />
        <input type="hidden" id="modal-away" />
        <input type="hidden" id="modal-sport" />
        <input type="hidden" id="modal-league" />
        <input type="hidden" id="modal-market" />
        <input type="hidden" id="modal-selection" />
        <input type="hidden" id="modal-bookmaker" />
        <input type="hidden" id="modal-bookmaker-key" /> <!-- Assuming this is needed -->
        <input type="hidden" id="modal-true-odds" />
        <input type="hidden" id="modal-probability" />
        <input type="hidden" id="modal-point" />
        <input type="hidden" id="modal-url" />
        <input type="hidden" id="modal-start-time-val" /> <!-- Renamed id to be distinct if needed -->

    </div>
    <form method="dialog" class="modal-backdrop">
        <button>close</button>
    </form>
</dialog>